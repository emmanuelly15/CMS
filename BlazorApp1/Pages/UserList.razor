@page "/UserList"

@using BlazorApp1.Data
@using CommonModels.Model
@inject UserService UserService
@inject NavigationManager NavigationManager

<style>
    body {
        background-color: #F9F6EE;
    }
</style>

<h1 style="font-family: Arial, Helvetica, sans-serif; color:#4682B4;">User Management</h1>

<p>Add, edit, or delete a user.</p>
<div>
    <RadzenButton Text="Add New User" Click=@OnButtonClick  Icon="add_circle_outline" ButtonStyle="ButtonStyle.Secondary" />
    <br>
    <br>
    @if (users != null)
    {
        <table style="color: #000000" class="table-bordered" BorderColor="Black">
            <thead>
                <tr style="height: 30px; background-color:#336699 ; color:#FFFFFF ;">
                    <th >Name</th>
                    <th >Email</th>
                    <th >Telephone</th>
                    <th >Employee_ID</th>
                    <th>Edit</th>
                    <th>Delete</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var v in users)
                {
                    <tr>
                    <td>@v.Name</td>
                    <td>@v.Email</td>
                    <td>@v.Telephone</td>
                    <td>@v.EmpId</td>
                    <td>@v.Password</td>
                    <td>
                        <button class="btn btn-primary">
                                <span class="oi oi-pencil"></span>
                                <a style="color: #FFFFFF" href="/EditUser/@v.Id">Edit</a>
                        </button></td> <td>
                        <button  class="btn btn-danger">
                                <span class="oi oi-trash"></span>
                                <a style="color: #FFFFFF" href="/DeleteUser/@v.Id">Delete</a>
                        </button>
                    </td>
                    </tr>
                }
            </tbody>
        </table>
    }
</div>
@code {
    
   private User[] users;

    protected override async Task OnInitializedAsync()
    {
        users = await UserService.GetUsersAsync();
        
    }
    void OnButtonClick()
    {
        NavigationManager.NavigateTo("UserManagement");
    }
}